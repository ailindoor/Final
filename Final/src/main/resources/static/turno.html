<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Turnos</title>
    <link rel="icon" href="img/icono.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/d9ee20a0aa.js" crossorigin="anonymous"></script>
</head>
<body style="background: #ededed;">
<div class="card-header row" style="background: #056491; color: white;">
    <a href="index.html" style="color: #ffffff; margin-left: 1rem; margin-top: 0.8rem;"><i class="fa-solid fa-arrow-left" style="font-size: 2rem;"></i></a>
    <h1 style="margin-left: 1rem;">Sistema Reserva de Turnos</h1>
</div>
<br>
<div class="container">
    <h2>Listado Turnos</h2>
    <hr>
    <div>
        <button type="button" class="btn btn-primary mb-3" data-toggle="modal" data-target="#crearTurnoModal" style="font-size: 1.3rem;">
            Nuevo Turno
        </button>
    </div>
    <br>
    <table class="table table-bordered table-striped">
        <thead class="thead-dark">
        <tr>
            <th>ID</th>
            <th>Pacinete</th>
            <th>Odontólogo</th>
            <th>Fecha</th>
            <th>Eliminar</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="turno : ${turnos}">
            <td th:text="${turno.id}">1</td>
            <td th:text="${turno.paciente}">ejemplo</td>
            <td th:text="${turno.adontologo}">ejemplo</td>
            <td th:text="${turno.fecha}">2024-09-12</td>
            <td><a type="button" class="btn btn-danger"  data-toggle="modal" data-target="#modalEliminar" style="color: #ffffff;"><i class="fa-sharp fa-solid fa-trash"></i></a></td>
        </tr>
        </tbody>
    </table>
</div>
<div class="modal fade" id="modalEliminar" tabindex="-1" aria-labelledby="modalEliminarLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalEliminarLabel">Confirmación de Eliminación</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                ¿Estás seguro de que deseas eliminar este turno?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" onclick="eliminarTurno()">Eliminar</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal para crear nuevo turno -->
<div class="modal fade" id="crearTurnoModal" tabindex="-1" role="dialog" aria-labelledby="crearTurnoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="crearTurnoModalLabel">Crear Nuevo Turno</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form th:action="@{/turnos/guardar}" th:object="${turno}" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="paciente">Paciente</label>
                        <select class="form-control" id="paciente" th:field="*{paciente.id}">
                            <option th:each="paciente : ${pacientes}" th:value="${paciente.id}" th:text="${paciente.nombre + ' ' + paciente.apellido}"></option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="odontologo">Odontólogo</label>
                        <select class="form-control" id="odontologo" th:field="*{odontologo.id}">
                            <option th:each="odontologo : ${odontologos}" th:value="${odontologo.id}" th:text="${odontologo.nombre + ' ' + odontologo.apellido}"></option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fecha">Fecha del Turno</label>
                        <input type="date" class="form-control" id="fecha" th:field="*{fecha}">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Turno</button>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>